{"version":3,"file":"site-templates-admin.js","mappings":"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","sources":["webpack://cbox-openlab-core/./assets/src/site-templates-admin.css?2688","webpack://cbox-openlab-core/webpack/bootstrap","webpack://cbox-openlab-core/webpack/runtime/make namespace object","webpack://cbox-openlab-core/./assets/src/site-templates-admin.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* global ajaxurl, jQuery, SiteTemplatePickerAdmin */\n\nimport './site-templates-admin.css'\n\n(function($){\n\tconst { endpoint, nonce } = window.SiteTemplatePickerAdmin\n\n\t$(document).ready(() => {\n\t\t$( '#template-site-id' )\n\t\t\t.select2({\n\t\t\t\tajax: {\n\t\t\t\t\turl: endpoint + '?_wpnonce=' + nonce,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: (params) => {\n\t\t\t\t\t\tconst query = {\n\t\t\t\t\t\t\tsearch: params.term,\n\t\t\t\t\t\t\tpage: params.page || 1\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn query;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t})\n\n\t$(document).on( 'select2:open', () => {\n\t\tdocument.querySelector( '.select2-search__field').focus()\n\t})\n\n\tconst templateCategoryCheckboxes = document.querySelectorAll( '#cboxol_template_categorychecklist input[type=\"checkbox\"]' );\n\tif ( templateCategoryCheckboxes.length ) {\n\t\tcalculateAllowedMemberTypeRestrictionsByGroupType();\n\t\ttemplateCategoryCheckboxes.forEach( checkbox => {\n\t\t\tcheckbox.addEventListener( 'change', calculateAllowedMemberTypeRestrictionsByGroupType );\n\t\t} );\n\t}\n\n\tconst visibilityRadios = document.querySelectorAll('.template-visibility-radios input[type=\"radio\"]');\n\n\tconst setVisibilitySuboptionsVisibility = () => {\n\t\tvisibilityRadios.forEach(radio => {\n\t\t\tconst controlsId = radio.getAttribute('aria-controls');\n\t\t\tconst isSuboptionVisible = 'yes' === radio.value && radio.checked || 'no' === radio.value && ! radio.checked;\n\n\t\t\tconst suboptions = document.getElementById( controlsId )\n\t\t\tif ( suboptions ) {\n\t\t\t\tsuboptions.style.display = isSuboptionVisible ? 'block' : 'none';\n\t\t\t}\n\t\t})\n\t}\n\tsetVisibilitySuboptionsVisibility()\n\n\tvisibilityRadios.forEach(radio => {\n\t\tradio.addEventListener('change', setVisibilitySuboptionsVisibility)\n\t})\n\n\tconst academicUnitCheckboxes = document.querySelectorAll( '#template-visibility-suboptions-academic-unit input[type=\"checkbox\"]' );\n\tconst academicUnitCheckboxArray = [ ...academicUnitCheckboxes ];\n\n\t// When an Academic Unit checkbox is checked, check and disable descendant checkboxes.\n\tconst academicUnitClickHandler = (e) => {\n\t\tconst checkbox = e.target;\n\t\tconst slug = checkbox.dataset.slug;\n\t\tconst isChecked = checkbox.checked;\n\n\t\tconst toggleChildren = (parentSlug, toggleState) => {\n\t\t\tconst children = academicUnitCheckboxArray.filter( child => child.dataset.parent === parentSlug );\n\t\t\tchildren.forEach( child => {\n\t\t\t\tchild.checked = toggleState;\n\t\t\t\ttoggleChildren( child.dataset.slug, toggleState );\n\t\t\t} )\n\t\t}\n\n\t\ttoggleChildren( slug, isChecked );\n\t}\n\n\tacademicUnitCheckboxes.forEach( checkbox => {\n\t\tcheckbox.addEventListener( 'click', academicUnitClickHandler )\n\t} )\n\n\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\tconst postsList = document.querySelectorAll('.wp-list-table tbody tr');\n\t\tlet draggedItem = null;\n\n\t\tpostsList.forEach(post => {\n\t\t\tpost.draggable = true;\n\n\t\t\tpost.addEventListener('dragstart', (e) => {\n\t\t\t\tdraggedItem = e.target;\n\t\t\t\tif ( draggedItem.tagName !== 'TR' ) {\n\t\t\t\t\tdraggedItem = draggedItem.closest('tr');\n\t\t\t\t}\n\t\t\t\te.dataTransfer.effectAllowed = 'move';\n\t\t\t\te.dataTransfer.setData('text/html', draggedItem);\n\t\t\t\tdraggedItem.classList.add('cboxol-dragging');\n\t\t\t}, false);\n\n\t\t\tpost.addEventListener('dragover', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.dataTransfer.dropEffect = 'move';\n\n\t\t\t\tconst hoverTarget = e.target.tagName === 'TR' ? e.target : e.target.closest('tr');\n\t\t\t\thoverTarget.classList.add( 'cboxol-dragover' );\n\t\t\t\thoverTarget.addEventListener('dragleave', () => {\n\t\t\t\t\thoverTarget.classList.remove( 'cboxol-dragover' );\n\t\t\t\t})\n\t\t\t}, false);\n\n\t\t\tpost.addEventListener('drop', (e) => {\n\t\t\t\tconst dropTarget = e.target.tagName === 'TR' ? e.target : e.target.closest('tr');\n\n\t\t\t\tif ( draggedItem !== dropTarget ) {\n\t\t\t\t\tdraggedItem.parentNode.insertBefore(draggedItem, dropTarget.nextSibling || dropTarget);\n\t\t\t\t\tupdatePostOrder();\n\n\t\t\t\t\tdraggedItem.classList.add( 'cboxol-just-dropped' )\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tdraggedItem.classList.remove( 'cboxol-just-dropped' )\n\t\t\t\t\t}, 1000)\n\t\t\t\t}\n\n\t\t\t\t// remove cbxol-dragover class from all tr elements\n\t\t\t\tdocument.querySelectorAll( 'tr' ).forEach( el => {\n\t\t\t\t\tel.classList.remove('cboxol-dragover')\n\t\t\t\t\tel.classList.remove('cboxol-dragging')\n\t\t\t\t} );\n\t\t\t}, false);\n\t\t});\n\n\t});\n\n\tfunction updatePostOrder() {\n\t\tconst posts = document.querySelectorAll('.wp-list-table tbody tr');\n\t\tconst orderData = Array.from(posts).map((post, index) => {\n\t\t\tconst postId = post.id.replace('post-', '');\n\t\t\treturn {\n\t\t\t\tid: postId,\n\t\t\t\tposition: index + 1\n\t\t\t};\n\t\t});\n\n\t\tconst params = new URLSearchParams();\n\t\tparams.append('order', JSON.stringify(orderData));\n\t\tparams.append('security', nonce);\n\n\t\tfetch(ajaxurl + '?action=cboxol_update_site_template_order', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t},\n\t\t\tbody: params\n\t\t}).then(response => response.json())\n\t\t  .then(() => {})\n\t\t  .catch(() => {});\n\t}\n\n\tfunction calculateAllowedMemberTypeRestrictionsByGroupType() {\n\t\tconst {\n\t\t\tcategoryMap,\n\t\t\tcourseCreateMemberTypes,\n\t\t\tcourseGroupTypeSlug,\n\t\t\tlang\n\t\t} = SiteTemplatePickerAdmin;\n\n\t\tif ( ! categoryMap ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst checkedCategories = Array.from( templateCategoryCheckboxes ).filter( checkbox => checkbox.checked ).map( checkbox => checkbox.value );\n\n\t\tlet allowedGroupTypes = [];\n\t\tcheckedCategories.forEach( category => {\n\t\t\tconst groupTypes = categoryMap[category];\n\t\t\tif ( groupTypes ) {\n\t\t\t\tallowedGroupTypes = allowedGroupTypes.concat( groupTypes );\n\t\t\t}\n\t\t} );\n\n\t\t// Remove duplicates\n\t\tallowedGroupTypes = [ ...new Set( allowedGroupTypes ) ];\n\n\t\t// We only restrict if there's a single allowed group type, and it's the courseGroupTypeSlug.\n\t\tconst restrict = allowedGroupTypes.length === 1 && allowedGroupTypes[0] === courseGroupTypeSlug;\n\n\t\tconst limitToMemberTypeCheckboxes = document.querySelectorAll( 'input.template-visibility-limit-to-member-types' );\n\t\tconst messageContainer = document.querySelector( '.template-visibility-limit-to-member-types-message' );\n\n\t\tif ( restrict ) {\n\t\t\t// Get the labels of the member types that can create courses from the limitToMemberTypeCheckboxes.\n\t\t\tconst allowedMemberTypeLabels = [ ...limitToMemberTypeCheckboxes ]\n\t\t\t\t.filter( checkbox => courseCreateMemberTypes.includes( checkbox.value ) )\n\t\t\t\t.map( checkbox => checkbox.labels[0].textContent );\n\n\t\t\tconst listFormatter = new Intl.ListFormat( lang, { style: 'long', type: 'conjunction' } );\n\t\t\tconst formattedList = listFormatter.format( allowedMemberTypeLabels );\n\n\t\t\t// Show the message.\n\t\t\tmessageContainer.style.display = 'block';\n\t\t\tmessageContainer.querySelector( '.member-type-names' ).textContent = formattedList;\n\n\t\t\t// Disable all but those in allowedGroupTypes.\n\t\t\tlimitToMemberTypeCheckboxes.forEach( checkbox => {\n\t\t\t\tcheckbox.disabled = ! courseCreateMemberTypes.includes( checkbox.value );\n\t\t\t} );\n\t\t} else {\n\t\t\t// Hide the message.\n\t\t\tmessageContainer.style.display = 'none';\n\n\t\t\t// Enable all checkboxes.\n\t\t\tlimitToMemberTypeCheckboxes.forEach( checkbox => {\n\t\t\t\tcheckbox.disabled = false;\n\t\t\t} );\n\t\t}\n\t}\n}(jQuery))\n"],"names":["$","endpoint","nonce","window","SiteTemplatePickerAdmin","document","ready","select2","ajax","url","dataType","data","params","query","search","term","page","on","querySelector","focus","templateCategoryCheckboxes","querySelectorAll","length","calculateAllowedMemberTypeRestrictionsByGroupType","forEach","checkbox","addEventListener","visibilityRadios","setVisibilitySuboptionsVisibility","radio","controlsId","getAttribute","isSuboptionVisible","value","checked","suboptions","getElementById","style","display","academicUnitCheckboxes","academicUnitCheckboxArray","academicUnitClickHandler","e","target","slug","dataset","isChecked","toggleChildren","parentSlug","toggleState","children","filter","child","parent","postsList","draggedItem","post","draggable","tagName","closest","dataTransfer","effectAllowed","setData","classList","add","preventDefault","dropEffect","hoverTarget","remove","dropTarget","parentNode","insertBefore","nextSibling","updatePostOrder","setTimeout","el","posts","orderData","Array","from","map","index","postId","id","replace","position","URLSearchParams","append","JSON","stringify","fetch","ajaxurl","method","headers","body","then","response","json","catch","categoryMap","courseCreateMemberTypes","courseGroupTypeSlug","lang","checkedCategories","allowedGroupTypes","category","groupTypes","concat","Set","restrict","limitToMemberTypeCheckboxes","messageContainer","allowedMemberTypeLabels","includes","labels","textContent","listFormatter","Intl","ListFormat","type","formattedList","format","disabled","jQuery"],"sourceRoot":""}