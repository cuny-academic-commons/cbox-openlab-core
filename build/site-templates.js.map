{"version":3,"file":"site-templates.js","mappings":"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","sources":["webpack://cbox-openlab-core/./assets/src/site-templates/api.js","webpack://cbox-openlab-core/./assets/src/site-templates/util.js","webpack://cbox-openlab-core/./assets/src/site-templates/site-template-picker.scss","webpack://cbox-openlab-core/webpack/bootstrap","webpack://cbox-openlab-core/webpack/runtime/define property getters","webpack://cbox-openlab-core/webpack/runtime/hasOwnProperty shorthand","webpack://cbox-openlab-core/webpack/runtime/make namespace object","webpack://cbox-openlab-core/./assets/src/site-templates/site-templates.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { buildQueryString } from './util';\n\nconst { endpoint, perPage, categoryMap } = window.SiteTemplatePicker;\nconst currentGroupType = window.CBOXOL_Group_Create.new_group_type;\n\nexport async function getSiteTemplates( category, page = 1 ) {\n\tlet templateCategory;\n\n\tif ( ! category ) {\n\t\ttemplateCategory = [ 0 ]\n\t\tfor ( var catId in categoryMap ) {\n\t\t\tif ( -1 !== categoryMap[ catId ].indexOf( currentGroupType ) ) {\n\t\t\t\ttemplateCategory.push( catId )\n\t\t\t}\n\t\t}\n\t} else {\n\t\ttemplateCategory = category\n\t}\n\n\tconst query = buildQueryString( {\n\t\t_fields: [ 'id', 'title', 'excerpt', 'featured_media', 'template_category', 'site_id', 'image', 'categories' ],\n\t\ttemplate_category: templateCategory,\n\t\torder: 'desc',\n\t\tper_page: Number( perPage ),\n\t\tpage,\n\t} );\n\n\tconst response = await fetch( endpoint + '?' + query )\n\tconst items = await response.json();\n\n\tif ( ! response.ok ) {\n\t\tthrow new Error( items.message );\n\t}\n\n\tconst totalPages = Number( response.headers.get( 'X-WP-TotalPages' ) );\n\n\tconst templates = items.map( ( item ) => {\n\t\treturn {\n\t\t\tid: item.site_id,\n\t\t\ttitle: item.title.rendered,\n\t\t\texcerpt: item.excerpt.rendered,\n\t\t\timage: item.image,\n\t\t\tcategories: item.categories,\n\t\t};\n\t} );\n\n\treturn {\n\t\ttemplates,\n\t\tprev: page > 1 ? page - 1 : null,\n\t\tnext: totalPages > page ? page + 1 : null,\n\t};\n}\n","/**\n * Generates URL-encoded query string using input query data.\n *\n * It is intended to behave equivalent as PHP's `http_build_query`, configured\n * with encoding type PHP_QUERY_RFC3986 (spaces as `%20`).\n *\n * @url @wordpress/url\n * @example\n * ```js\n * const queryString = buildQueryString( {\n *    simple: 'is ok',\n *    arrays: [ 'are', 'fine', 'too' ],\n *    objects: {\n *       evenNested: {\n *          ok: 'yes',\n *       },\n *    },\n * } );\n * // \"simple=is%20ok&arrays%5B0%5D=are&arrays%5B1%5D=fine&arrays%5B2%5D=too&objects%5BevenNested%5D%5Bok%5D=yes\"\n * ```\n *\n * @param {Record<string,*>} data Data to encode.\n *\n * @return {string} Query string.\n */\nexport function buildQueryString( data ) {\n\tlet string = '';\n\n\tconst stack = Object.entries( data );\n\n\tlet pair;\n\twhile ( ( pair = stack.shift() ) ) {\n\t\tlet [ key, value ] = pair;\n\n\t\t// Support building deeply nested data, from array or object values.\n\t\tconst hasNestedData =\n\t\t\tArray.isArray( value ) || ( value && value.constructor === Object );\n\n\t\tif ( hasNestedData ) {\n\t\t\t// Push array or object values onto the stack as composed of their\n\t\t\t// original key and nested index or key, retaining order by a\n\t\t\t// combination of Array#reverse and Array#unshift onto the stack.\n\t\t\tconst valuePairs = Object.entries( value ).reverse();\n\t\t\tfor ( const [ member, memberValue ] of valuePairs ) {\n\t\t\t\tstack.unshift( [ `${ key }[${ member }]`, memberValue ] );\n\t\t\t}\n\t\t} else if ( value !== undefined ) {\n\t\t\t// Null is treated as special case, equivalent to empty string.\n\t\t\tif ( value === null ) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\n\t\t\tstring +=\n\t\t\t\t'&' + [ key, value ].map( encodeURIComponent ).join( '=' );\n\t\t}\n\t}\n\n\t// Loop will concatenate with leading `&`, but it's only expected for all\n\t// but the first query parameter. This strips the leading `&`, while still\n\t// accounting for the case that the string may in-fact be empty.\n\treturn string.substr( 1 );\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Internal dependencies\n */\nimport { getSiteTemplates } from './api';\n\nimport './site-template-picker.scss'\n\nconst templateCategories = document.querySelector( '#site-template-categories' );\nconst templatePicker = document.querySelector( '.site-template-picker' );\nconst templatePanel = document.querySelector( '.panel-template-picker' );\nconst templatePagination = document.querySelector( '.site-template-pagination' );\nconst templateToClone = document.querySelector( '[name=\"source_blog\"]' );\nconst setupSiteToggle = document.querySelector( '#set-up-site-toggle' );\nconst siteType = document.querySelectorAll( '[name=\"new_or_old\"]' );\nconst messages = window.SiteTemplatePicker.messages;\n\n// Cache default template. Usually it's group type site template.\nconst defaultTemplate = templateToClone.value || '0';\n\nfunction renderTemplate( { id, title, excerpt, image, categories } ) {\n\treturn `\n\t<button type=\"button\" class=\"site-template-component\" data-template-id=\"${ id }\">\n\t\t<div class=\"site-template-component__image\">\n\t\t\t${ image\n\t\t\t\t? `<img src=\"${ image }\" alt=\"${ title }\">`\n\t\t\t\t: `<svg fill=\"currentColor\" width=\"24\" height=\"24\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clip-rule=\"evenodd\"></path></svg>`\n\t\t\t}\n\t\t\t<div class=\"site-template-component__description\">${ excerpt }</div>\n\t\t</div>\n\t\t<div class=\"site-template-component__meta\">\n\t\t\t<span class=\"site-template-component__category\">${ categories.join( ', ' ) }</span>\n\t\t\t<div class=\"site-template-component__name\">${ title }</div>\n\t\t</div>\n\t</button>\n\t`;\n}\n\nfunction updateTemplates( category, page ) {\n\ttemplatePicker.innerHTML = `<p>${ messages.loading }</p>`;\n\n\tgetSiteTemplates( category, page ).then( ( { templates, prev, next } ) => {\n\t\t// Restore template to default value.\n\t\ttemplateToClone.value = defaultTemplate;\n\n\t\tif ( ! templates.length ) {\n\t\t\ttemplatePicker.innerHTML = `<p>${ messages.noResults }</p>`;\n\t\t\treturn;\n\t\t}\n\n\t\tconst compiled = templates.map( ( template ) => renderTemplate( template ) ).join('');\n\t\ttemplatePicker.innerHTML = compiled;\n\n\t\tupdatePagination( prev, next );\n\t} );\n}\n\nfunction updatePagination( prev, next ) {\n\tconst prevBtn = templatePagination.querySelector( '.prev' );\n\tconst nextBtn = templatePagination.querySelector( '.next' );\n\n\tconst isVisible = templatePagination.classList.contains( 'hidden' );\n\tconsole.log(isVisible)\n\tconst hide = ! prev && ! next && ! isVisible;\n\n\t// Hide pagination if we have only one page.\n\tif ( hide ) {\n\t\ttemplatePagination.classList.add( 'hidden' );\n\t}\n\n\t// Button are enabled later if we have pages.\n\tprevBtn.disabled = true;\n\tnextBtn.disabled = true;\n\n\tif ( prev ) {\n\t\tprevBtn.dataset.page = prev;\n\t\tprevBtn.disabled = false;\n\t}\n\n\tif ( next ) {\n\t\tnextBtn.dataset.page = next;\n\t\tnextBtn.disabled = false;\n\t}\n}\n\nfunction togglePanel( display = false ) {\n\tif ( display ) {\n\t\ttemplatePanel.classList.remove( 'hidden' );\n\t\treturn;\n\t}\n\n\ttemplatePanel.classList.add( 'hidden' );\n\n\t// Restore template to default value.\n\ttemplateToClone.value = defaultTemplate;\n}\n\ntemplateCategories.addEventListener( 'change', function( event ) {\n\tconst category = ( event.target.value !== '0' ) ? event.target.value : null;\n\n\ttemplatePicker.innerHTML = `<p>${ messages.loading }</p>`;\n\n\tupdateTemplates( category );\n} )\n\ntemplatePicker.addEventListener( 'click', function( event ) {\n\tconst target = event.target.closest( '.site-template-component' );\n\n\tif ( ! target ) {\n\t\treturn;\n\t}\n\n\t// Remove selection.\n\tif ( target.classList.contains( 'is-selected' ) ) {\n\t\ttarget.classList.remove( 'is-selected' );\n\t\ttemplateToClone.value = defaultTemplate;\n\t\treturn;\n\t}\n\n\tconst templates = this.querySelectorAll( '.site-template-component' );\n\tconst templateId = target.dataset.templateId;\n\n\t// Remove 'is-selected' marker for previously selected template.\n\ttemplates.forEach( ( template ) => template.classList.remove( 'is-selected' ) );\n\n\t// Mark current template as selected.\n\ttarget.classList.add( 'is-selected' );\n\n\t// Update input value for clone catcher method.\n\ttemplateToClone.value = templateId;\n} );\n\ntemplatePicker.addEventListener( 'mouseover', function( event ) {\n\tconst template = event.target.closest( '.site-template-component' );\n\n\tif ( ! template ) {\n\t\treturn;\n\t}\n\n\t// Not using toggle since this event does bubble.\n\tif ( ! template.classList.contains( 'has-hover' ) ) {\n\t\ttemplate.classList.add( 'has-hover' );\n\t}\n} );\n\ntemplatePicker.addEventListener( 'mouseout', function( event ) {\n\tconst template = event.target.closest( '.site-template-component' );\n\n\tif ( ! template ) {\n\t\treturn;\n\t}\n\n\t// Not using toggle since this event does bubble.\n\tif ( template.classList.contains( 'has-hover' ) ) {\n\t\ttemplate.classList.remove( 'has-hover' );\n\t}\n} );\n\ntemplatePagination.addEventListener( 'click', function( event ) {\n\tconst target = event.target.closest( '.btn' );\n\n\tif ( ! target ) {\n\t\treturn;\n\t}\n\n\tconst category = ( templateCategories.value !== '0' ) ? templateCategories.value : null;\n\tconst page = target.dataset.page ? Number( target.dataset.page ) : null;\n\n\tupdateTemplates( category, page );\n} );\n\nsiteType.forEach( ( typeSelect ) => {\n\ttypeSelect.addEventListener( 'change', ( event ) => togglePanel( event.target.value === 'new' ) );\n} );\n\nif ( setupSiteToggle ) {\n\tsetupSiteToggle.addEventListener( 'change', ( event ) => togglePanel( event.target.checked ) );\n\n\tif ( setupSiteToggle.checked ) {\n\t\t// Display the panel.\n\t\ttogglePanel( templatePanel.checked );\n\t}\n} else {\n\t// If the setupSiteToggle doesn't exist, it means that sites are required for this group type.\n\ttogglePanel( true );\n}\n\n// Prefetch templates.\nupdateTemplates();\n"],"names":["buildQueryString","endpoint","perPage","categoryMap","window","SiteTemplatePicker","currentGroupType","CBOXOL_Group_Create","new_group_type","getSiteTemplates","category","page","templateCategory","catId","indexOf","push","query","_fields","template_category","order","per_page","Number","response","fetch","items","json","ok","Error","message","totalPages","headers","get","templates","map","item","id","site_id","title","rendered","excerpt","image","categories","prev","next","data","string","stack","Object","entries","pair","shift","key","value","hasNestedData","Array","isArray","constructor","valuePairs","reverse","member","memberValue","unshift","undefined","encodeURIComponent","join","substr","templateCategories","document","querySelector","templatePicker","templatePanel","templatePagination","templateToClone","setupSiteToggle","siteType","querySelectorAll","messages","defaultTemplate","renderTemplate","updateTemplates","innerHTML","loading","then","length","noResults","compiled","template","updatePagination","prevBtn","nextBtn","isVisible","classList","contains","console","log","hide","add","disabled","dataset","togglePanel","display","remove","addEventListener","event","target","closest","templateId","forEach","typeSelect","checked"],"sourceRoot":""}