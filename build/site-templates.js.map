{"version":3,"file":"site-templates.js","mappings":"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","sources":["webpack://cbox-openlab-core/./assets/src/site-templates/api.js","webpack://cbox-openlab-core/./assets/src/site-templates/util.js","webpack://cbox-openlab-core/./assets/src/site-templates/site-template-picker.scss?abf6","webpack://cbox-openlab-core/webpack/bootstrap","webpack://cbox-openlab-core/webpack/runtime/define property getters","webpack://cbox-openlab-core/webpack/runtime/hasOwnProperty shorthand","webpack://cbox-openlab-core/webpack/runtime/make namespace object","webpack://cbox-openlab-core/./assets/src/site-templates/site-templates.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport { buildQueryString } from './util';\n\nconst { endpoint, perPage, categoryMap } = window.SiteTemplatePicker;\nconst currentGroupType = window.CBOXOL_Group_Create.new_group_type;\n\nexport async function getSiteTemplates( category, page = 1 ) {\n\tlet templateCategory;\n\n\tif ( ! category ) {\n\t\ttemplateCategory = [ 0 ]\n\t\tfor ( var catId in categoryMap ) {\n\t\t\tif ( -1 !== categoryMap[ catId ].indexOf( currentGroupType ) ) {\n\t\t\t\ttemplateCategory.push( catId )\n\t\t\t}\n\t\t}\n\t} else {\n\t\ttemplateCategory = category\n\t}\n\n\tconst query = buildQueryString( {\n\t\t_fields: [ 'id', 'title', 'excerpt', 'featured_media', 'template_category', 'site_id', 'image', 'categories' ],\n\t\ttemplate_category: templateCategory,\n\t\torder: 'desc',\n\t\tper_page: Number( perPage ),\n\t\tpage,\n\t} );\n\n\tconst response = await fetch( endpoint + '?' + query )\n\tconst items = await response.json();\n\n\tif ( ! response.ok ) {\n\t\tthrow new Error( items.message );\n\t}\n\n\tconst totalPages = Number( response.headers.get( 'X-WP-TotalPages' ) );\n\n\tconst templates = items.map( ( item ) => {\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\ttitle: item.title.rendered,\n\t\t\texcerpt: item.excerpt.rendered,\n\t\t\timage: item.image,\n\t\t\tcategories: item.categories,\n\t\t\tsiteId: item.site_id\n\t\t};\n\t} );\n\n\treturn {\n\t\ttemplates,\n\t\tprev: page > 1 ? page - 1 : null,\n\t\tnext: totalPages > page ? page + 1 : null,\n\t};\n}\n","/**\n * Generates URL-encoded query string using input query data.\n *\n * It is intended to behave equivalent as PHP's `http_build_query`, configured\n * with encoding type PHP_QUERY_RFC3986 (spaces as `%20`).\n *\n * @url @wordpress/url\n * @example\n * ```js\n * const queryString = buildQueryString( {\n *    simple: 'is ok',\n *    arrays: [ 'are', 'fine', 'too' ],\n *    objects: {\n *       evenNested: {\n *          ok: 'yes',\n *       },\n *    },\n * } );\n * // \"simple=is%20ok&arrays%5B0%5D=are&arrays%5B1%5D=fine&arrays%5B2%5D=too&objects%5BevenNested%5D%5Bok%5D=yes\"\n * ```\n *\n * @param {Record<string,*>} data Data to encode.\n *\n * @return {string} Query string.\n */\nexport function buildQueryString( data ) {\n\tlet string = '';\n\n\tconst stack = Object.entries( data );\n\n\tlet pair;\n\twhile ( ( pair = stack.shift() ) ) {\n\t\tlet [ key, value ] = pair;\n\n\t\t// Support building deeply nested data, from array or object values.\n\t\tconst hasNestedData =\n\t\t\tArray.isArray( value ) || ( value && value.constructor === Object );\n\n\t\tif ( hasNestedData ) {\n\t\t\t// Push array or object values onto the stack as composed of their\n\t\t\t// original key and nested index or key, retaining order by a\n\t\t\t// combination of Array#reverse and Array#unshift onto the stack.\n\t\t\tconst valuePairs = Object.entries( value ).reverse();\n\t\t\tfor ( const [ member, memberValue ] of valuePairs ) {\n\t\t\t\tstack.unshift( [ `${ key }[${ member }]`, memberValue ] );\n\t\t\t}\n\t\t} else if ( value !== undefined ) {\n\t\t\t// Null is treated as special case, equivalent to empty string.\n\t\t\tif ( value === null ) {\n\t\t\t\tvalue = '';\n\t\t\t}\n\n\t\t\tstring +=\n\t\t\t\t'&' + [ key, value ].map( encodeURIComponent ).join( '=' );\n\t\t}\n\t}\n\n\t// Loop will concatenate with leading `&`, but it's only expected for all\n\t// but the first query parameter. This strips the leading `&`, while still\n\t// accounting for the case that the string may in-fact be empty.\n\treturn string.substr( 1 );\n}\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Internal dependencies\n */\nimport { getSiteTemplates } from './api';\n\nimport './site-template-picker.scss'\n\nconst templateCategories = document.querySelector( '#site-template-categories' );\nconst templatePicker = document.querySelector( '.site-template-picker' );\nconst templatePanel = document.querySelector( '.panel-template-picker' );\nconst templatePagination = document.querySelector( '.site-template-pagination' );\nconst templateToClone = document.querySelector( '[name=\"source_blog\"]' );\nconst setupSiteToggle = document.querySelector( '#set-up-site-toggle' );\nconst siteType = document.querySelectorAll( '[name=\"new_or_old\"]' );\nconst messages = window.SiteTemplatePicker.messages;\nconst defaultMap = window.SiteTemplatePicker.defaultMap;\nconst currentGroupType = window.CBOXOL_Group_Create?.new_group_type || null\n\n// Cache default template. Usually it's group type site template.\nconst defaultTemplateForGroupType = currentGroupType && defaultMap.hasOwnProperty( currentGroupType ) ? defaultMap[ currentGroupType ] : 0\n\nconst defaultTemplate = defaultTemplateForGroupType ? defaultTemplateForGroupType.toString() : templateToClone.value\n\nfunction renderTemplate( { id, siteId, title, excerpt, image, categories } ) {\n\treturn `\n\t<button type=\"button\" class=\"site-template-component\" data-template-id=\"${ id }\" data-template-site-id=\"${ siteId }\">\n\t\t<div class=\"site-template-component__image\">\n\t\t\t${ image\n\t\t\t\t? `<img src=\"${ image }\" alt=\"${ title }\">`\n\t\t\t\t: `<svg fill=\"currentColor\" width=\"24\" height=\"24\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" clip-rule=\"evenodd\"></path></svg>`\n\t\t\t}\n\t\t\t<div class=\"site-template-component__description\">${ excerpt }</div>\n\t\t</div>\n\t\t<div class=\"site-template-component__meta\">\n\t\t\t<span class=\"site-template-component__category\">${ categories.join( ', ' ) }</span>\n\t\t\t<div class=\"site-template-component__name\">${ title }</div>\n\t\t</div>\n\t</button>\n\t`;\n}\n\nfunction updateTemplates( category, page ) {\n\ttemplatePicker.innerHTML = `<p>${ messages.loading }</p>`;\n\n\tgetSiteTemplates( category, page ).then( ( { templates, prev, next } ) => {\n\n\t\tif ( ! templates.length ) {\n\t\t\ttemplatePicker.innerHTML = `<p>${ messages.noResults }</p>`;\n\t\t\treturn;\n\t\t}\n\n\t\tconst compiled = templates.map( ( template ) => renderTemplate( template ) ).join('');\n\t\ttemplatePicker.innerHTML = compiled;\n\n\t\t// Restore template to default value.\n\t\tsetSelectedTemplateId( defaultTemplate )\n\n\t\tupdatePagination( prev, next );\n\t} );\n}\n\nfunction updatePagination( prev, next ) {\n\tconst prevBtn = templatePagination.querySelector( '.prev' );\n\tconst nextBtn = templatePagination.querySelector( '.next' );\n\n\tconst isVisible = templatePagination.classList.contains( 'hidden' );\n\tconst hide = ! prev && ! next && ! isVisible;\n\n\t// Hide pagination if we have only one page.\n\tif ( hide ) {\n\t\ttemplatePagination.classList.add( 'hidden' );\n\t}\n\n\t// Button are enabled later if we have pages.\n\tprevBtn.disabled = true;\n\tnextBtn.disabled = true;\n\n\tif ( prev ) {\n\t\tprevBtn.dataset.page = prev;\n\t\tprevBtn.disabled = false;\n\t}\n\n\tif ( next ) {\n\t\tnextBtn.dataset.page = next;\n\t\tnextBtn.disabled = false;\n\t}\n}\n\nfunction togglePanel( display = false ) {\n\tif ( display ) {\n\t\t// Don't unhide if there's 0 or 1 templates to show.\n\t\tconst templates = templatePicker.querySelectorAll( '.site-template-component' );\n\t\tif ( templates.length > 1 ) {\n\t\t\ttemplatePanel.classList.remove( 'hidden' );\n\t\t}\n\t\treturn;\n\t}\n\n\ttemplatePanel.classList.add( 'hidden' );\n\n\t// Restore template to default value.\n\tsetSelectedTemplateId( defaultTemplate )\n}\n\nfunction setSelectedTemplateId( selectedId ) {\n\tconst templates = templatePicker.querySelectorAll( '.site-template-component' );\n\n\ttemplates.forEach( ( template ) => {\n\t\tconst templateId = template.dataset.templateId;\n\n\t\tif ( templateId === selectedId ) {\n\t\t\ttemplate.classList.add( 'is-selected' )\n\n\t\t\ttemplateToClone.value = template.dataset.templateSiteId;\n\t\t} else {\n\t\t\ttemplate.classList.remove( 'is-selected' )\n\t\t}\n\t} )\n}\n\ntemplateCategories.addEventListener( 'change', function( event ) {\n\tconst category = ( event.target.value !== '0' ) ? event.target.value : null;\n\n\ttemplatePicker.innerHTML = `<p>${ messages.loading }</p>`;\n\n\tupdateTemplates( category );\n} )\n\ntemplatePicker.addEventListener( 'click', function( event ) {\n\tconst target = event.target.closest( '.site-template-component' );\n\n\tif ( ! target ) {\n\t\treturn;\n\t}\n\n\tsetSelectedTemplateId( target.dataset.templateId )\n} );\n\ntemplatePicker.addEventListener( 'mouseover', function( event ) {\n\tconst template = event.target.closest( '.site-template-component' );\n\n\tif ( ! template ) {\n\t\treturn;\n\t}\n\n\t// Not using toggle since this event does bubble.\n\tif ( ! template.classList.contains( 'has-hover' ) ) {\n\t\ttemplate.classList.add( 'has-hover' );\n\t}\n} );\n\ntemplatePicker.addEventListener( 'mouseout', function( event ) {\n\tconst template = event.target.closest( '.site-template-component' );\n\n\tif ( ! template ) {\n\t\treturn;\n\t}\n\n\t// Not using toggle since this event does bubble.\n\tif ( template.classList.contains( 'has-hover' ) ) {\n\t\ttemplate.classList.remove( 'has-hover' );\n\t}\n} );\n\ntemplatePagination.addEventListener( 'click', function( event ) {\n\tconst target = event.target.closest( '.btn' );\n\n\tif ( ! target ) {\n\t\treturn;\n\t}\n\n\tconst category = ( templateCategories.value !== '0' ) ? templateCategories.value : null;\n\tconst page = target.dataset.page ? Number( target.dataset.page ) : null;\n\n\tupdateTemplates( category, page );\n} );\n\nsiteType.forEach( ( typeSelect ) => {\n\ttypeSelect.addEventListener( 'change', ( event ) => togglePanel( event.target.value === 'new' ) );\n} );\n\nif ( setupSiteToggle ) {\n\tsetupSiteToggle.addEventListener( 'change', ( event ) => togglePanel( event.target.checked ) );\n\n\tif ( setupSiteToggle.checked ) {\n\t\t// Display the panel.\n\t\ttogglePanel( templatePanel.checked );\n\t}\n} else {\n\t// If the setupSiteToggle doesn't exist, it means that sites are required for this group type.\n\ttogglePanel( true );\n}\n\n// Prefetch templates.\nupdateTemplates();\n"],"names":["buildQueryString","endpoint","perPage","categoryMap","window","SiteTemplatePicker","currentGroupType","CBOXOL_Group_Create","new_group_type","getSiteTemplates","category","page","arguments","length","undefined","templateCategory","catId","indexOf","push","query","_fields","template_category","order","per_page","Number","response","fetch","items","json","ok","Error","message","totalPages","headers","get","templates","map","item","id","title","rendered","excerpt","image","categories","siteId","site_id","prev","next","data","string","stack","Object","entries","pair","shift","key","value","hasNestedData","Array","isArray","constructor","valuePairs","reverse","member","memberValue","unshift","encodeURIComponent","join","substr","templateCategories","document","querySelector","templatePicker","templatePanel","templatePagination","templateToClone","setupSiteToggle","siteType","querySelectorAll","messages","defaultMap","defaultTemplateForGroupType","hasOwnProperty","defaultTemplate","toString","renderTemplate","_ref","updateTemplates","innerHTML","loading","then","_ref2","noResults","compiled","template","setSelectedTemplateId","updatePagination","prevBtn","nextBtn","isVisible","classList","contains","hide","add","disabled","dataset","togglePanel","display","remove","selectedId","forEach","templateId","templateSiteId","addEventListener","event","target","closest","typeSelect","checked"],"sourceRoot":""}